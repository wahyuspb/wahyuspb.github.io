<!DOCTYPE html>

<!--
  portfolYOU Jekyll theme by Youssef Raafat
  Free for personal and commercial use under the MIT license
  https://github.com/YoussefRaafatNasry/portfolYOU
-->

<html lang="en" class="h-100">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#317EFB">
  
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon-32x32.png">
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon-192x192.png" sizes="192x192">
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon-160x160.png" sizes="160x160">
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon-96x96.png" sizes="96x96">
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon-16x16.pn" sizes="16x16">


  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.0/css/all.css">

  <!-- Bootstrap CSS CDN -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  <!-- Animate CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.css" type="text/css"/>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css" type="text/css">

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-TNJDJLX');</script>
  <!-- End Google Tag Manager -->

  <!-- SEO Plugin -->
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>(1) tech stock analysis | Wahyu Suryo Putro Bayu</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="(1) tech stock analysis" />
<meta name="author" content="Wahyu Suryo Putro Bayu" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Analysis of technology stocks, including change in price over time, daily returns, and stock behaviour prediction." />
<meta property="og:description" content="Analysis of technology stocks, including change in price over time, daily returns, and stock behaviour prediction." />
<link rel="canonical" href="http://localhost:4000/projects/1-tech-stock-analysis" />
<meta property="og:url" content="http://localhost:4000/projects/1-tech-stock-analysis" />
<meta property="og:site_name" content="Wahyu Suryo Putro Bayu" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-11-21T17:00:45+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="(1) tech stock analysis" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Wahyu Suryo Putro Bayu"},"dateModified":"2022-11-21T17:00:45+07:00","datePublished":"2022-11-21T17:00:45+07:00","description":"Analysis of technology stocks, including change in price over time, daily returns, and stock behaviour prediction.","headline":"(1) tech stock analysis","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/projects/1-tech-stock-analysis"},"url":"http://localhost:4000/projects/1-tech-stock-analysis"}</script>
<!-- End Jekyll SEO tag -->


</head>


<body class="d-flex flex-column h-100">

  <main class="flex-shrink-0 container mt-5">
  <nav class="navbar navbar-expand-lg navbar-light">

  <a class="navbar-brand" href="/"><h5><b>Wahyu Suryo Putro Bayu</b></h5></a>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
    <div class="navbar-nav ml-auto"><a class="nav-item nav-link " href="/404.html"></a>

      <a class="nav-item nav-link active" href="/"></a>

      <a class="nav-item nav-link " href="/blog/tags"></a>

      <a class="nav-item nav-link " href="/about/">About</a>

      <a class="nav-item nav-link active" href="/projects/">Projects</a>

      <a class="nav-item nav-link " href="/contact/">Contact Me</a>

      

    </div>
  </div>

</nav>
  <div class="notebook">
  <h1 class="notebook-title">Stock Market Analysis for Tech Stocks</h1>
  <div class="project-skills">
  Skills:<span class="badge badge-pill text-primary border border-primary ml-1">Python</span><span class="badge badge-pill text-primary border border-primary ml-1">Pandas</span><span class="badge badge-pill text-primary border border-primary ml-1">Seaborn</span><span class="badge badge-pill text-primary border border-primary ml-1">Financial Analysis</span></div>
  <a target="_blank" href=></a>
  <hr />
<p>In this task, we’ll analyse information from the stock market for a few generation stocks.</p>

<p>Once more, Pandas will be used to extract andexamine the statistics, imagine it, andexamine distinct approaches to analyse the danger of a inventory, based on its overall performance records.</p>

<p>Here are the questions we’ll try to answer:</p>

<ul>
  <li>What changed into the trade in a inventory’s charge over the years?</li>
  <li>What became the each day return average of a inventory?</li>
  <li>What became the moving average of numerous shares?</li>
  <li>What become the correlation among day by day returns of various stocks?</li>
  <li>What a fantastic dealcost will we positioned at chance by using investing in a particular stock?</li>
  <li>How Are we able to try to predict destiny stock behaviour?</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Python Data Analysis imports
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">Series</span><span class="p">,</span><span class="n">DataFrame</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1">#Visualisation imports
</span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="n">sns</span><span class="p">.</span><span class="n">set_style</span><span class="p">(</span><span class="s">'whitegrid'</span><span class="p">)</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>

<span class="c1">#To grab stock data
</span><span class="kn">from</span> <span class="nn">pandas.io.data</span> <span class="kn">import</span> <span class="n">DataReader</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="c1">#To handle floats in Python 2
</span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
</code></pre></div></div>

<p>We’re going to analyse some tech stocks, and it seems like a good idea to look at their performance over the last year. We can create a list with the stock names, for future looping.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#We're going to analyse stock info for Apple, Google, Microsoft, and Amazon
</span><span class="n">tech_list</span> <span class="o">=</span> <span class="p">[</span><span class="s">'AAPL'</span><span class="p">,</span><span class="s">'GOOG'</span><span class="p">,</span><span class="s">'MSFT'</span><span class="p">,</span><span class="s">'AMZN'</span><span class="p">,</span><span class="s">'YHOO'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Setting the end date to today
</span><span class="n">end</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>

<span class="c1">#Start date set to 1 year back
</span><span class="n">start</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">(</span><span class="n">end</span><span class="p">.</span><span class="n">year</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">end</span><span class="p">.</span><span class="n">month</span><span class="p">,</span><span class="n">end</span><span class="p">.</span><span class="n">day</span><span class="p">)</span> 
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Using Yahoo Finance to grab the stock data
</span><span class="k">for</span> <span class="n">stock</span> <span class="ow">in</span> <span class="n">tech_list</span><span class="p">:</span>
    <span class="nb">globals</span><span class="p">()[</span><span class="n">stock</span><span class="p">]</span> <span class="o">=</span> <span class="n">DataReader</span><span class="p">(</span><span class="n">stock</span><span class="p">,</span><span class="s">'yahoo'</span><span class="p">,</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">)</span> <span class="c1">#The globals method sets the stock name to a global variable
</span></code></pre></div></div>

<p>Thanks to the globals method, Apple’s stock data will be stored in the AAPL global variable dataframe. Let’s see if that worked.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AAPL</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Adj Close</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2015-09-23</th>
      <td>113.629997</td>
      <td>114.720001</td>
      <td>113.300003</td>
      <td>114.320000</td>
      <td>35756700</td>
      <td>111.926895</td>
    </tr>
    <tr>
      <th>2015-09-24</th>
      <td>113.250000</td>
      <td>115.500000</td>
      <td>112.370003</td>
      <td>115.000000</td>
      <td>50219500</td>
      <td>112.592660</td>
    </tr>
    <tr>
      <th>2015-09-25</th>
      <td>116.440002</td>
      <td>116.690002</td>
      <td>114.019997</td>
      <td>114.709999</td>
      <td>56151900</td>
      <td>112.308730</td>
    </tr>
    <tr>
      <th>2015-09-28</th>
      <td>113.849998</td>
      <td>114.570000</td>
      <td>112.440002</td>
      <td>112.440002</td>
      <td>52109000</td>
      <td>110.086252</td>
    </tr>
    <tr>
      <th>2015-09-29</th>
      <td>112.830002</td>
      <td>113.510002</td>
      <td>107.860001</td>
      <td>109.059998</td>
      <td>73365400</td>
      <td>106.777002</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Basic stats for Apple's Stock
</span><span class="n">AAPL</span><span class="p">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Adj Close</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>253.000000</td>
      <td>253.000000</td>
      <td>253.000000</td>
      <td>253.000000</td>
      <td>2.530000e+02</td>
      <td>253.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>104.824941</td>
      <td>105.777510</td>
      <td>103.881146</td>
      <td>104.858498</td>
      <td>4.179762e+07</td>
      <td>103.707287</td>
    </tr>
    <tr>
      <th>std</th>
      <td>8.073718</td>
      <td>8.110392</td>
      <td>8.019398</td>
      <td>8.075914</td>
      <td>1.749642e+07</td>
      <td>7.735402</td>
    </tr>
    <tr>
      <th>min</th>
      <td>90.000000</td>
      <td>91.669998</td>
      <td>89.470001</td>
      <td>90.339996</td>
      <td>1.304640e+07</td>
      <td>89.853242</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>97.320000</td>
      <td>98.209999</td>
      <td>96.580002</td>
      <td>97.139999</td>
      <td>2.944520e+07</td>
      <td>96.348065</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>105.519997</td>
      <td>106.309998</td>
      <td>104.879997</td>
      <td>105.790001</td>
      <td>3.695570e+07</td>
      <td>104.701886</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>110.629997</td>
      <td>111.769997</td>
      <td>109.410004</td>
      <td>110.779999</td>
      <td>4.896780e+07</td>
      <td>109.220001</td>
    </tr>
    <tr>
      <th>max</th>
      <td>123.129997</td>
      <td>123.820000</td>
      <td>121.620003</td>
      <td>122.570000</td>
      <td>1.333697e+08</td>
      <td>120.004194</td>
    </tr>
  </tbody>
</table>
</div>

<p>And that easily, we can make out what the stock’s minimum, maximum, and average price was for the last year.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Some basic info about the dataframe
</span><span class="n">AAPL</span><span class="p">.</span><span class="n">info</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
DatetimeIndex: 253 entries, 2015-09-23 to 2016-09-22
Data columns (total 6 columns):
Open         253 non-null float64
High         253 non-null float64
Low          253 non-null float64
Close        253 non-null float64
Volume       253 non-null int64
Adj Close    253 non-null float64
dtypes: float64(5), int64(1)
memory usage: 13.8 KB
</code></pre></div></div>

<p>No missing info in the dataframe above, so we can go about our business.</p>

<h3 id="whats-the-change-in-stocks-price-over-time">What’s the change in stock’s price over time?</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Plotting the stock's adjusted closing price using pandas
</span><span class="n">AAPL</span><span class="p">[</span><span class="s">'Adj Close'</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x11463ef50&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_13_1.png" alt="png" /></p>

<p>Similarily, we can plot change in a stock’s volume being traded, over time.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Plotting the total volume being traded over time
</span><span class="n">AAPL</span><span class="p">[</span><span class="s">'Volume'</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1148209d0&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_60_1.png" alt="png" /></p>

<h3 id="what-was-the-moving-average-of-various-stocks">What was the moving average of various stocks?</h3>

<p>Let’s check out the moving average for stocks over a 10, 20 and 50 day period of time. We’ll add that information to the stock’s dataframe.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ma_day</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">50</span><span class="p">]</span>

<span class="k">for</span> <span class="n">ma</span> <span class="ow">in</span> <span class="n">ma_day</span><span class="p">:</span>
    <span class="n">column_name</span> <span class="o">=</span> <span class="s">"MA for %s days"</span> <span class="o">%</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ma</span><span class="p">))</span>
    
    <span class="n">AAPL</span><span class="p">[</span><span class="n">column_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">AAPL</span><span class="p">[</span><span class="s">'Adj Close'</span><span class="p">].</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">ma</span><span class="p">,</span><span class="n">center</span><span class="o">=</span><span class="bp">False</span><span class="p">).</span><span class="n">mean</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AAPL</span><span class="p">.</span><span class="n">tail</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe table-responsive">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Adj Close</th>
      <th>MA for 10 days</th>
      <th>MA for 20 days</th>
      <th>MA for 50 days</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-09-16</th>
      <td>115.120003</td>
      <td>116.129997</td>
      <td>114.040001</td>
      <td>114.919998</td>
      <td>79886900</td>
      <td>114.919998</td>
      <td>108.808999</td>
      <td>108.1500</td>
      <td>104.992706</td>
    </tr>
    <tr>
      <th>2016-09-19</th>
      <td>115.190002</td>
      <td>116.180000</td>
      <td>113.250000</td>
      <td>113.580002</td>
      <td>47023000</td>
      <td>113.580002</td>
      <td>109.393999</td>
      <td>108.3610</td>
      <td>105.341124</td>
    </tr>
    <tr>
      <th>2016-09-20</th>
      <td>113.050003</td>
      <td>114.120003</td>
      <td>112.510002</td>
      <td>113.570000</td>
      <td>34514300</td>
      <td>113.570000</td>
      <td>109.980999</td>
      <td>108.6140</td>
      <td>105.683375</td>
    </tr>
    <tr>
      <th>2016-09-21</th>
      <td>113.849998</td>
      <td>113.989998</td>
      <td>112.440002</td>
      <td>113.550003</td>
      <td>36003200</td>
      <td>113.550003</td>
      <td>110.499999</td>
      <td>108.8490</td>
      <td>106.016473</td>
    </tr>
    <tr>
      <th>2016-09-22</th>
      <td>114.349998</td>
      <td>114.940002</td>
      <td>114.000000</td>
      <td>114.620003</td>
      <td>31011700</td>
      <td>114.620003</td>
      <td>111.410000</td>
      <td>109.1785</td>
      <td>106.381911</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AAPL</span><span class="p">[[</span><span class="s">'Adj Close'</span><span class="p">,</span><span class="s">'MA for 10 days'</span><span class="p">,</span><span class="s">'MA for 20 days'</span><span class="p">,</span><span class="s">'MA for 50 days'</span><span class="p">]].</span><span class="n">plot</span><span class="p">(</span><span class="n">subplots</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x114a9c390&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_20_1.png" alt="png" /></p>

<p>Moving averages for more days have a smoother plot, as they’re less reliable on daily fluctuations. So even though, Apple’s stock has a slight dip near the start of September, it’s generally been on an upward trend since mid-July.</p>

<h3 id="what-was-the-daily-return-average-of-a-stock">What was the daily return average of a stock?</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#The daily return column can be created by using the percentage change over the adjusted closing price
</span><span class="n">AAPL</span><span class="p">[</span><span class="s">'Daily Return'</span><span class="p">]</span> <span class="o">=</span> <span class="n">AAPL</span><span class="p">[</span><span class="s">'Adj Close'</span><span class="p">].</span><span class="n">pct_change</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">AAPL</span><span class="p">[</span><span class="s">'Daily Return'</span><span class="p">].</span><span class="n">tail</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Date
2016-09-16   -0.005624
2016-09-19   -0.011660
2016-09-20   -0.000088
2016-09-21   -0.000176
2016-09-22    0.009423
Name: Daily Return, dtype: float64
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Plotting the daily return
</span><span class="n">AAPL</span><span class="p">[</span><span class="s">'Daily Return'</span><span class="p">].</span><span class="n">plot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span><span class="n">legend</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s">'--'</span><span class="p">,</span><span class="n">marker</span><span class="o">=</span><span class="s">'o'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1150ccd90&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_25_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">AAPL</span><span class="p">[</span><span class="s">'Daily Return'</span><span class="p">].</span><span class="n">dropna</span><span class="p">(),</span><span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">'red'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1163caad0&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_26_1.png" alt="png" /></p>

<p>Positive daily returns seem to be slightly more frequent than negative returns for Apple.</p>

<h3 id="what-was-the-correlation-between-daily-returns-of-different-stocks">What was the correlation between daily returns of different stocks?</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Reading just the 'Adj Close' column this time
</span><span class="n">close_df</span> <span class="o">=</span> <span class="n">DataReader</span><span class="p">(</span><span class="n">tech_list</span><span class="p">,</span><span class="s">'yahoo'</span><span class="p">,</span><span class="n">start</span><span class="p">,</span><span class="n">end</span><span class="p">)[</span><span class="s">'Adj Close'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">close_df</span><span class="p">.</span><span class="n">tail</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AAPL</th>
      <th>AMZN</th>
      <th>GOOG</th>
      <th>MSFT</th>
      <th>YHOO</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-09-16</th>
      <td>114.919998</td>
      <td>778.520020</td>
      <td>768.880005</td>
      <td>57.250000</td>
      <td>43.669998</td>
    </tr>
    <tr>
      <th>2016-09-19</th>
      <td>113.580002</td>
      <td>775.099976</td>
      <td>765.700012</td>
      <td>56.930000</td>
      <td>43.189999</td>
    </tr>
    <tr>
      <th>2016-09-20</th>
      <td>113.570000</td>
      <td>780.219971</td>
      <td>771.409973</td>
      <td>56.810001</td>
      <td>42.790001</td>
    </tr>
    <tr>
      <th>2016-09-21</th>
      <td>113.550003</td>
      <td>789.739990</td>
      <td>776.219971</td>
      <td>57.759998</td>
      <td>44.139999</td>
    </tr>
    <tr>
      <th>2016-09-22</th>
      <td>114.620003</td>
      <td>804.700012</td>
      <td>787.210022</td>
      <td>57.820000</td>
      <td>44.150002</td>
    </tr>
  </tbody>
</table>
</div>

<p>Everything works as expected.</p>

<p>Just as we did earlier, we can use Pandas’ pct_change method to get the daily returns of our stocks.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rets_df</span> <span class="o">=</span> <span class="n">close_df</span><span class="p">.</span><span class="n">pct_change</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rets_df</span><span class="p">.</span><span class="n">tail</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AAPL</th>
      <th>AMZN</th>
      <th>GOOG</th>
      <th>MSFT</th>
      <th>YHOO</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2016-09-16</th>
      <td>-0.005624</td>
      <td>0.011472</td>
      <td>-0.003732</td>
      <td>0.001049</td>
      <td>-0.007274</td>
    </tr>
    <tr>
      <th>2016-09-19</th>
      <td>-0.011660</td>
      <td>-0.004393</td>
      <td>-0.004136</td>
      <td>-0.005590</td>
      <td>-0.010992</td>
    </tr>
    <tr>
      <th>2016-09-20</th>
      <td>-0.000088</td>
      <td>0.006606</td>
      <td>0.007457</td>
      <td>-0.002108</td>
      <td>-0.009261</td>
    </tr>
    <tr>
      <th>2016-09-21</th>
      <td>-0.000176</td>
      <td>0.012202</td>
      <td>0.006235</td>
      <td>0.016722</td>
      <td>0.031549</td>
    </tr>
    <tr>
      <th>2016-09-22</th>
      <td>0.009423</td>
      <td>0.018943</td>
      <td>0.014158</td>
      <td>0.001039</td>
      <td>0.000227</td>
    </tr>
  </tbody>
</table>
</div>

<p>Let’s try creating a scatterplot to visualise any correlations between different stocks. First we’ll visualise a scatterplot for the relationship between the daily return of a stock to itself.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">jointplot</span><span class="p">(</span><span class="s">'GOOG'</span><span class="p">,</span><span class="s">'GOOG'</span><span class="p">,</span><span class="n">rets_df</span><span class="p">,</span><span class="n">kind</span><span class="o">=</span><span class="s">'scatter'</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">'green'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;seaborn.axisgrid.JointGrid at 0x116d5b1d0&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_35_1.png" alt="png" /></p>

<p>As expected, the relationship is perfectly linear because we’re trying to correlate something with itself. Now, let’s check out the relationship between Google and Apple’s daily returns.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">jointplot</span><span class="p">(</span><span class="s">'GOOG'</span><span class="p">,</span><span class="s">'AAPL'</span><span class="p">,</span><span class="n">rets_df</span><span class="p">,</span><span class="n">kind</span><span class="o">=</span><span class="s">'scatter'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;seaborn.axisgrid.JointGrid at 0x11a321290&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_37_1.png" alt="png" /></p>

<p>There seems to be a minor correlation between the two stocks, looking at the figure above. The Pearson R Correlation Coefficient value of 0.45 echoes that sentiment.</p>

<p>But what about other combinations of stocks?</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">pairplot</span><span class="p">(</span><span class="n">rets_df</span><span class="p">.</span><span class="n">dropna</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;seaborn.axisgrid.PairGrid at 0x11a9ba710&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_39_1.png" alt="png" /></p>

<p>Quick and dirty overarching visualisation of the scatterplots and histograms of daily returns of our stocks. To see the actual numbers for the correlation coefficients, we can use seaborn’s corrplot method.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">corrplot</span><span class="p">(</span><span class="n">rets_df</span><span class="p">.</span><span class="n">dropna</span><span class="p">(),</span><span class="n">annot</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x127a07690&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_41_1.png" alt="png" /></p>

<p>Google and Microsoft seem to have the highest correlation. But another interesting thing to note is that all tech companies that we explored are positively correlated.</p>

<h3 id="how-much-value-do-we-put-at-risk-by-investing-in-a-particular-stock">How much value do we put at risk by investing in a particular stock?</h3>

<p>A basic way to quantify risk is to compare the expected return (which can be the mean of the stock’s daily returns) with the standard deviation of the daily returns.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rets</span> <span class="o">=</span> <span class="n">rets_df</span><span class="p">.</span><span class="n">dropna</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="p">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="n">plt</span><span class="p">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">rets</span><span class="p">.</span><span class="n">mean</span><span class="p">(),</span><span class="n">rets</span><span class="p">.</span><span class="n">std</span><span class="p">(),</span><span class="n">s</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Expected Return'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Risk'</span><span class="p">)</span>


<span class="c1">#For adding annotatios in the scatterplot
</span><span class="k">for</span> <span class="n">label</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">rets</span><span class="p">.</span><span class="n">columns</span><span class="p">,</span><span class="n">rets</span><span class="p">.</span><span class="n">mean</span><span class="p">(),</span><span class="n">rets</span><span class="p">.</span><span class="n">std</span><span class="p">()):</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">annotate</span><span class="p">(</span>
    <span class="n">label</span><span class="p">,</span>
    <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">120</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span>
    <span class="n">textcoords</span> <span class="o">=</span> <span class="s">'offset points'</span><span class="p">,</span> <span class="n">ha</span> <span class="o">=</span> <span class="s">'right'</span><span class="p">,</span> <span class="n">va</span> <span class="o">=</span> <span class="s">'bottom'</span><span class="p">,</span>
    <span class="n">arrowprops</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span><span class="o">=</span><span class="s">'-&gt;'</span><span class="p">,</span><span class="n">connectionstyle</span> <span class="o">=</span> <span class="s">'arc3,rad=-0.5'</span><span class="p">))</span>
    

</code></pre></div></div>

<p><img src="/public/project-images/tech_stock_analysis/output_46_0.png" alt="png" /></p>

<p>We’d want a stock to have a high expected return and a low risk; Google and Microsoft seem to be the safe options for that. Meanwhile, Yahoo and Amazon stocks have higher expected returns, but also have a higher risk</p>

<h3 id="value-at-risk">Value at Risk</h3>

<p>We can treat <em>Value at risk</em> as the amount of money we could expect to lose for a given confidence interval. We’ll use the ‘Bootstrap’ method and the ‘Monte Carlo Method’ to extract this value.</p>

<p><strong>Bootstrap Method</strong></p>

<p>Using this method, we calculate the empirical quantiles from a histogram of daily returns. The quantiles help us define our confidence interval.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="p">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">AAPL</span><span class="p">[</span><span class="s">'Daily Return'</span><span class="p">].</span><span class="n">dropna</span><span class="p">(),</span><span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">'purple'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x11534fdd0&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_48_1.png" alt="png" /></p>

<p>To recap, our histogram for Apple’s stock looked like the above. And our daily returns dataframe looked like:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rets</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>AAPL</th>
      <th>AMZN</th>
      <th>GOOG</th>
      <th>MSFT</th>
      <th>YHOO</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2015-09-24</th>
      <td>0.005948</td>
      <td>-0.004328</td>
      <td>0.005527</td>
      <td>0.000912</td>
      <td>-0.013450</td>
    </tr>
    <tr>
      <th>2015-09-25</th>
      <td>-0.002522</td>
      <td>-0.017799</td>
      <td>-0.022100</td>
      <td>0.000683</td>
      <td>-0.007157</td>
    </tr>
    <tr>
      <th>2015-09-28</th>
      <td>-0.019789</td>
      <td>-0.038512</td>
      <td>-0.027910</td>
      <td>-0.014793</td>
      <td>-0.052523</td>
    </tr>
    <tr>
      <th>2015-09-29</th>
      <td>-0.030061</td>
      <td>-0.015851</td>
      <td>0.000134</td>
      <td>0.003465</td>
      <td>0.023913</td>
    </tr>
    <tr>
      <th>2015-09-30</th>
      <td>0.011370</td>
      <td>0.031891</td>
      <td>0.022606</td>
      <td>0.018877</td>
      <td>0.023001</td>
    </tr>
  </tbody>
</table>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Using Pandas built in qualtile method
</span><span class="n">rets</span><span class="p">[</span><span class="s">'AAPL'</span><span class="p">].</span><span class="n">quantile</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-0.025722813451247724
</code></pre></div></div>

<p>The 0.05 empirical quantile of daily returns is at -0.019. This means that with 95% confidence, the worst daily loss will not exceed 2.57% (of the investment).</p>

<h3 id="how-can-we-attempt-to-predict-future-stock-behaviour">How can we attempt to predict future stock behaviour?</h3>

<p><strong>Monte Carlo Method</strong></p>

<p>Check out this <a href="http://www.investopedia.com/articles/07/montecarlo.asp">link</a> for more info on the Monte Carlo method. In short: in this method, we run simulations to predict the future many times, and aggregate the results in the end for some quantifiable value.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">days</span> <span class="o">=</span> <span class="mi">365</span>

<span class="c1">#delta t
</span><span class="n">dt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="mi">365</span>

<span class="n">mu</span> <span class="o">=</span> <span class="n">rets</span><span class="p">.</span><span class="n">mean</span><span class="p">()[</span><span class="s">'GOOG'</span><span class="p">]</span>

<span class="n">sigma</span> <span class="o">=</span> <span class="n">rets</span><span class="p">.</span><span class="n">std</span><span class="p">()[</span><span class="s">'GOOG'</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Function takes in stock price, number of days to run, mean and standard deviation values
</span><span class="k">def</span> <span class="nf">stock_monte_carlo</span><span class="p">(</span><span class="n">start_price</span><span class="p">,</span><span class="n">days</span><span class="p">,</span><span class="n">mu</span><span class="p">,</span><span class="n">sigma</span><span class="p">):</span>
    
    <span class="n">price</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>
    <span class="n">price</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">start_price</span>
    
    <span class="n">shock</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>
    <span class="n">drift</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">days</span><span class="p">)</span>
    
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">days</span><span class="p">):</span>
        
        <span class="c1">#Shock and drift formulas taken from the Monte Carlo formula
</span>        <span class="n">shock</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">normal</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="n">mu</span><span class="o">*</span><span class="n">dt</span><span class="p">,</span><span class="n">scale</span><span class="o">=</span><span class="n">sigma</span><span class="o">*</span><span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dt</span><span class="p">))</span>
        
        <span class="n">drift</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">mu</span> <span class="o">*</span> <span class="n">dt</span>
        
        <span class="c1">#New price = Old price + Old price*(shock+drift)
</span>        <span class="n">price</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">price</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="n">price</span><span class="p">[</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">drift</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">+</span><span class="n">shock</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span>
        
    <span class="k">return</span> <span class="n">price</span>
</code></pre></div></div>

<p>We’re going to run the simulation of Google stocks. Let’s check out the opening value of the stock.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">GOOG</span><span class="p">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Open</th>
      <th>High</th>
      <th>Low</th>
      <th>Close</th>
      <th>Volume</th>
      <th>Adj Close</th>
    </tr>
    <tr>
      <th>Date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2015-09-23</th>
      <td>622.049988</td>
      <td>628.929993</td>
      <td>620.000000</td>
      <td>622.359985</td>
      <td>1470900</td>
      <td>622.359985</td>
    </tr>
    <tr>
      <th>2015-09-24</th>
      <td>616.640015</td>
      <td>627.320007</td>
      <td>612.400024</td>
      <td>625.799988</td>
      <td>2240100</td>
      <td>625.799988</td>
    </tr>
    <tr>
      <th>2015-09-25</th>
      <td>629.770020</td>
      <td>629.770020</td>
      <td>611.000000</td>
      <td>611.969971</td>
      <td>2174000</td>
      <td>611.969971</td>
    </tr>
    <tr>
      <th>2015-09-28</th>
      <td>610.340027</td>
      <td>614.604980</td>
      <td>589.380005</td>
      <td>594.890015</td>
      <td>3127700</td>
      <td>594.890015</td>
    </tr>
    <tr>
      <th>2015-09-29</th>
      <td>597.280029</td>
      <td>605.000000</td>
      <td>590.219971</td>
      <td>594.969971</td>
      <td>2309500</td>
      <td>594.969971</td>
    </tr>
  </tbody>
</table>
</div>

<p>Let’s do a simulation of 100 runs, and plot them.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">start_price</span> <span class="o">=</span> <span class="mf">622.049</span> <span class="c1">#Taken from above
</span>
<span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
    <span class="n">plt</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">stock_monte_carlo</span><span class="p">(</span><span class="n">start_price</span><span class="p">,</span><span class="n">days</span><span class="p">,</span><span class="n">mu</span><span class="p">,</span><span class="n">sigma</span><span class="p">))</span>

<span class="n">plt</span><span class="p">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Days'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Price'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Monte Carlo Analysis for Google'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.text.Text at 0x11b53ddd0&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_58_1.png" alt="png" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">runs</span> <span class="o">=</span> <span class="mi">10000</span>

<span class="n">simulations</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">runs</span><span class="p">)</span>

<span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="n">runs</span><span class="p">):</span>
    <span class="n">simulations</span><span class="p">[</span><span class="n">run</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock_monte_carlo</span><span class="p">(</span><span class="n">start_price</span><span class="p">,</span><span class="n">days</span><span class="p">,</span><span class="n">mu</span><span class="p">,</span><span class="n">sigma</span><span class="p">)[</span><span class="n">days</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">simulations</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">hist</span><span class="p">(</span><span class="n">simulations</span><span class="p">,</span><span class="n">bins</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">figtext</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.8</span><span class="p">,</span><span class="n">s</span><span class="o">=</span><span class="s">"Start price: $%.2f"</span> <span class="o">%</span><span class="n">start_price</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">figtext</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.7</span><span class="p">,</span><span class="s">"Mean final price: $%.2f"</span> <span class="o">%</span> <span class="n">simulations</span><span class="p">.</span><span class="n">mean</span><span class="p">())</span>

<span class="n">plt</span><span class="p">.</span><span class="n">figtext</span><span class="p">(</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.6</span><span class="p">,</span><span class="s">"VaR(0.99): $%.2f"</span> <span class="o">%</span> <span class="p">(</span><span class="n">start_price</span> <span class="o">-</span><span class="n">q</span><span class="p">,))</span>

<span class="n">plt</span><span class="p">.</span><span class="n">figtext</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span><span class="mf">0.6</span><span class="p">,</span> <span class="s">"q(0.99): $%.2f"</span> <span class="o">%</span> <span class="n">q</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">q</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">'r'</span><span class="p">)</span>

<span class="n">plt</span><span class="p">.</span><span class="n">title</span><span class="p">(</span><span class="sa">u</span><span class="s">"Final price distribution for Google Stock after %s days"</span> <span class="o">%</span><span class="n">days</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="s">'bold'</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.text.Text at 0x12a7e1cd0&gt;
</code></pre></div></div>

<p><img src="/images/projects/tech_stock_analysis/output_60_1.png" alt="png" /></p>

<p>We can infer from this that, Google’s stock is pretty stable. The starting price that we had was USD622.05, and the average final price over 10,000 runs was USD623.36.</p>

<p>The red line indicates the value of stock at risk at the desired confidence interval. For every stock, we’d be risking USD18.38, 99% of the time.</p>

</div>

<hr>

  <!-- MathJax script -->
  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  </main>

  <footer class="mt-auto py-3 text-center">

  <small class="text-muted mb-2">
    <i class="fas fa-code"></i> with <i class="fas fa-heart"></i>
    by <strong>Wahyu Suryo Putro Bayu</strong>
  </small>

  <div class="container-fluid justify-content-center"><a class="social mx-1"  href="https://www.github.com/wahyuspb"
       style="color: #6c757d"
       onMouseOver="this.style.color='#333333'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-github fa-2x"></i>
    </a><a class="social mx-1"  href="https://www.linkedin.com/in/wahyuspb"
       style="color: #6c757d"
       onMouseOver="this.style.color='#007bb5'"
       onMouseOut="this.style.color='#6c757d'">
      <i class="fab fa-linkedin-in fa-2x"></i>
    </a>

</div>

</footer>

  
  <!-- GitHub Buttons -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<!-- jQuery CDN -->
<script async defer src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Popper.js CDN -->
<script async defer src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

<!-- Bootstrap JS CDN -->
<script async defer src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- wow.js CDN & Activation -->
<script async defer src="https://cdnjs.cloudflare.com/ajax/libs/wow/1.1.2/wow.js"></script>
<script> new WOW().init(); </script>

<!-- Initialize all tooltips -->
<script>
$(function () {
    $('[data-toggle="tooltip"]').tooltip()
})
</script>

</body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TNJDJLX"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

</html>
